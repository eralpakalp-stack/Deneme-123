<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- SÃ¼rprizi gizlemek iÃ§in baÅŸlÄ±k deÄŸiÅŸtirildi -->
  <title>HÄ±zlÄ± Bilgi Testi</title> 
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Tailwind CSS'i etkinleÅŸtirmek ve Ã¶zel stilleri eklemek iÃ§in */
    * { box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      /* Daha sÄ±cak, daha davetkar bir renk paleti */
      background-color: #f9f7f3; 
    }
    .question-card {
      /* Sorular iÃ§in modern, gÃ¶ze hoÅŸ gelen bir kart stili */
      background: #ffffff;
      border-radius: 1rem; /* Tailwind: rounded-xl */
      padding: 1.5rem; /* Tailwind: p-6 */
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      transition: all 0.6s ease;
      max-width: 400px;
      margin: 2rem auto;
    }
    .option-button {
      background: #a8dadc; /* AÃ§Ä±k Mavi */
      color: #1d3557; /* Koyu Mavi */
      transition: all 0.2s ease;
      font-weight: 600;
      border: 3px solid transparent;
    }
    .option-button:hover:not(:disabled) {
      background: #457b9d; /* Orta Mavi */
      color: #fff;
    }
    .option-button:disabled {
      cursor: default;
      opacity: 0.8;
    }
    .correct-feedback { background-color: #4CAF50; color: white; border-color: #4CAF50; } /* YeÅŸil */
    .wrong-feedback { background-color: #F44336; color: white; border-color: #F44336; } /* KÄ±rmÄ±zÄ± */
    .next-button {
        background: #e63946; /* KÄ±rmÄ±zÄ±/SÃ¼rpriz Rengi */
        transition: transform 0.1s ease-in-out;
    }
    .next-button:hover {
        background: #c32f38;
        transform: scale(1.02);
    }
    /* Popup Stili */
    .popup-content {
      animation: popupShow 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    @keyframes popupShow {
      0% { transform: scale(0.5); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
  </style>
</head>
<body class="min-h-screen flex flex-col justify-center items-center p-4">

  <!-- Ana BaÅŸlÄ±k ve Skor AlanÄ± -->
  <div class="text-center mb-8">
    <h1 id="mainTitle" class="text-3xl md:text-4xl font-extrabold text-[#1d3557] tracking-tight">
      EÄŸlenceli Bilgi Testi
    </h1>
    <p class="text-lg text-gray-500 mt-2" id="scoreDisplay">Seviye 1: 0 Puan</p>
  </div>

  <!-- Soru AlanÄ± (TÃ¼m Seviyeler Buraya YÃ¼klenir) -->
  <div id="quizContainer" class="w-full max-w-lg">
    <!-- Sorular JS ile dinamik olarak buraya eklenecektir -->
  </div>
  
  <!-- Seviye GeÃ§iÅŸ ve BaÅŸarÄ± MesajÄ± -->
  <div id="levelMessageContainer" class="hidden text-center mt-8">
    <h2 id="levelMessageTitle" class="text-2xl font-bold text-[#457b9d] mb-4"></h2>
    <p id="levelMessageText" class="text-gray-600 mb-6 max-w-md mx-auto"></p>
    <button id="nextLevelButton" onclick="nextLevel()" 
            class="next-button text-white font-bold py-3 px-8 rounded-full shadow-lg text-xl transition duration-300">
      Sonraki Seviyeye GeÃ§!
    </button>
  </div>

  <!-- Popup Teklif / SonuÃ§ -->
  <div class="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center p-4 z-50 hidden" id="popup">
    <div class="popup-content bg-white p-8 rounded-2xl shadow-2xl text-center max-w-sm w-full">
      <h2 id="popupTitle" class="text-4xl font-extrabold text-[#e63946] mb-4"></h2>
      <p id="popupText" class="text-gray-700 text-lg mb-6"></p>
      <!-- Buraya kiÅŸisel bir fotoÄŸraf URL'si ekleyin -->
      <img id="proposalImage" src="https://placehold.co/400x300/e63946/ffffff?text=O+BÃ¼yÃ¼k+An" alt="Teklif FotoÄŸrafÄ±" class="rounded-xl mx-auto mb-4">
      <button onclick="window.location.reload()" 
              class="bg-gray-400 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-500 transition duration-200">
        Tekrar BaÅŸla
      </button>
    </div>
  </div>

  <!-- Ses Efekti (Hata) -->
  <audio id="wrongSound" src="https://www.soundjay.com/button/sounds/button-10.mp3"></audio>

  <script>
    // --- QUIZ DATA ---
    // Cevap index'i, 0 tabanlÄ±dÄ±r.
    const quizData = {
      level1: {
        scoreNeeded: 2, // 3 sorudan en az 2 doÄŸru
        questions: [
          { q: "Soru 1: TÃ¼rkiye'nin baÅŸkenti neresidir?", options: ["Ä°stanbul", "Ä°zmir", "Ankara"], correctIndex: 2 },
          { q: "Soru 2: DÃ¼nyanÄ±n en bÃ¼yÃ¼k okyanusu hangisidir?", options: ["Atlas Okyanusu", "Hint Okyanusu", "BÃ¼yÃ¼k Okyanus"], correctIndex: 2 },
          { q: "Soru 3: Haftada kaÃ§ gÃ¼n vardÄ±r?", options: ["6", "7", "5"], correctIndex: 1 }
        ]
      },
      level2: {
        scoreNeeded: 2, // 3 sorudan en az 2 doÄŸru
        questions: [
          // LÃœTFEN KENDÄ° KÄ°ÅžÄ°SEL SORULARINIZLA DEÄžÄ°ÅžTÄ°RÄ°N
          { q: "Soru 4: Ä°lk tanÄ±ÅŸtÄ±ÄŸÄ±mÄ±z yerde ne yemiÅŸtik?", options: ["Pizza", "Tost", "Sushi"], correctIndex: 1 },
          { q: "Soru 5: Sence benim en sevdiÄŸim renk nedir?", options: ["Mavi", "YeÅŸil", "KÄ±rmÄ±zÄ±"], correctIndex: 0 },
          { q: "Soru 6: Beraber izlediÄŸimiz ilk film hangisiydi?", options: ["Aksiyon", "Komedi", "Romantik"], correctIndex: 2 }
        ]
      },
      level3: {
        scoreNeeded: 1, // 1 sorudan 1 doÄŸru
        questions: [
          // TEKLÄ°F SORUSU
          { q: "Soru 7: Gelecekteki en bÃ¼yÃ¼k hayalin nedir? (Teklif sorusu!)", options: ["DÃ¼nyayÄ± gezmek", "Yeni bir iÅŸ kurmak", "Benimle evlenmek"], correctIndex: 2 }
        ]
      }
    };

    // --- STATE VARIABLES ---
    let currentLevel = 1;
    let currentQuestionIndex = 0;
    let score = 0;
    let isLocked = false; // Bir soruyu cevapladÄ±ktan sonra kilitler

    // --- UTILITY FUNCTIONS ---
    function getLevelData() {
      return quizData['level' + currentLevel];
    }

    // --- RENDERING FUNCTIONS ---
    function renderQuestion() {
      const data = getLevelData();
      const q = data.questions[currentQuestionIndex];
      const container = document.getElementById('quizContainer');

      // Clear previous content
      container.innerHTML = '';
      document.getElementById('levelMessageContainer').classList.add('hidden');
      isLocked = false;

      const card = document.createElement('div');
      card.className = 'question-card flex flex-col items-center';
      card.innerHTML = `
        <h2 class="text-xl md:text-2xl font-semibold text-center text-[#1d3557] mb-6">
          ${q.q}
        </h2>
        <div class="options w-full space-y-3">
          ${q.options.map((option, index) => `
            <button class="option-button w-full py-3 px-4 rounded-xl shadow-md text-base" data-index="${index}" onclick="handleAnswer(this, ${q.correctIndex})">
              ${option}
            </button>
          `).join('')}
        </div>
        <div id="feedback" class="feedback text-center mt-4 text-sm font-medium min-h-6"></div>
      `;
      container.appendChild(card);
      updateScoreDisplay();
    }

    function updateScoreDisplay() {
      document.getElementById('scoreDisplay').textContent = `Seviye ${currentLevel}: ${score} / ${getLevelData().questions.length} | Hedef: ${getLevelData().scoreNeeded}`;
    }

    function showLevelMessage(passed) {
      const container = document.getElementById('levelMessageContainer');
      const title = document.getElementById('levelMessageTitle');
      const text = document.getElementById('levelMessageText');
      const nextButton = document.getElementById('nextLevelButton');
      
      container.classList.remove('hidden');
      document.getElementById('quizContainer').innerHTML = ''; // Hide quiz card

      if (passed) {
        title.textContent = "ðŸ¥³ Tebrikler! Seviye BaÅŸarÄ±lÄ±!";
        text.textContent = "BaÅŸarÄ±nla beni gururlandÄ±rdÄ±n! Seni bir sonraki, daha kiÅŸisel sorularÄ±n olduÄŸu seviyeye davet ediyorum.";
        nextButton.classList.remove('hidden');
      } else {
        title.textContent = "ðŸ˜” BaÅŸaramadÄ±n...";
        text.textContent = `Bu seviyeyi geÃ§mek iÃ§in en az ${getLevelData().scoreNeeded} doÄŸru cevap gerekiyordu. Tekrar denemelisin!`;
        nextButton.classList.add('hidden');
        
        // Yeniden baÅŸla butonu
        const restartButton = document.createElement('button');
        restartButton.textContent = "Yeniden BaÅŸla";
        restartButton.className = "next-button text-white font-bold py-3 px-8 rounded-full shadow-lg text-xl transition duration-300";
        restartButton.onclick = () => window.location.reload();
        container.appendChild(restartButton);
      }
    }

    function showPopup(success) {
      const popup = document.getElementById('popup');
      const popupTitle = document.getElementById('popupTitle');
      const popupText = document.getElementById('popupText');

      if (success) {
        popupTitle.textContent = "ðŸ’ EN BÃœYÃœK SÃœRPRÄ°Z! EVLEN BENÄ°MLE! â¤ï¸";
        popupText.textContent = "HayatÄ±mÄ±n quiz'ini baÅŸarÄ±yla tamamladÄ±n! Bu bÃ¼yÃ¼k hayali gerÃ§ekleÅŸtirmeye hazÄ±r mÄ±sÄ±n? Sonsuza dek benim misin?";
        document.getElementById('proposalImage').src = "https://placehold.co/400x300/a8dadc/1d3557?text=GeleceÄŸimiz+Birlikte!";
      } else {
        // Bu, seviye 3'te baÅŸarÄ±sÄ±z olursa gÃ¶rÃ¼nÃ¼r (teorik olarak olmamalÄ±)
        popupTitle.textContent = "Test TamamlandÄ±";
        popupText.textContent = "Testi bitirdin. LÃ¼tfen sonucu gÃ¶rmek iÃ§in tekrar dene!";
      }
      popup.classList.remove('hidden');
    }

    // --- EVENT HANDLERS ---
    function handleAnswer(button, correctIndex) {
      if (isLocked) return;
      isLocked = true; // Kilitlendi
      
      const buttons = button.parentNode.querySelectorAll('button');
      const feedback = document.getElementById('feedback');
      const selectedIndex = parseInt(button.getAttribute('data-index'));

      // TÃ¼m butonlarÄ± devre dÄ±ÅŸÄ± bÄ±rak
      buttons.forEach(btn => btn.disabled = true);
      
      // SeÃ§ilen butonu iÅŸaretle
      button.classList.add('scale-105', 'shadow-xl');

      if (selectedIndex === correctIndex) {
        score++;
        button.classList.remove('option-button');
        button.classList.add('correct-feedback');
        feedback.textContent = "MÃ¼kemmel! Bir puan daha kazandÄ±n! ðŸ‘";
      } else {
        document.getElementById('wrongSound').play();
        button.classList.remove('option-button');
        button.classList.add('wrong-feedback');
        feedback.textContent = "Ah, yanlÄ±ÅŸ cevap. DoÄŸru cevap: " + buttons[correctIndex].textContent;
        
        // DoÄŸru cevabÄ± da iÅŸaretle
        buttons[correctIndex].classList.add('correct-feedback');
      }

      // Skor gÃ¼ncellemeyi gÃ¶ster
      updateScoreDisplay();

      // Bir sonraki soruya veya seviyeye geÃ§iÅŸi kontrol et
      setTimeout(() => {
        currentQuestionIndex++;
        if (currentQuestionIndex < getLevelData().questions.length) {
          renderQuestion(); // AynÄ± seviyede sonraki soru
        } else {
          checkLevelCompletion(); // Seviye sonu
        }
      }, 1500);
    }

    function checkLevelCompletion() {
      const data = getLevelData();
      const passed = score >= data.scoreNeeded;

      if (currentLevel === 3) {
        // En son seviyede teklif pop-up'Ä±nÄ± gÃ¶ster
        showPopup(passed);
      } else {
        // Ara seviyelerde geÃ§iÅŸ mesajÄ±nÄ± gÃ¶ster
        showLevelMessage(passed);
      }
    }

    function nextLevel() {
      currentLevel++;
      currentQuestionIndex = 0;
      score = 0; // Her seviyede puan sÄ±fÄ±rlanÄ±r
      document.getElementById('levelMessageContainer').classList.add('hidden');
      renderQuestion();
    }

    // --- INITIALIZATION ---
    window.onload = renderQuestion; // Sayfa yÃ¼klendiÄŸinde Level 1'i baÅŸlat
  </script>
</body>
</html>
